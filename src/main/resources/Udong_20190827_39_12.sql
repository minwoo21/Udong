-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- AREA Table Create SQL
CREATE TABLE AREA
(
    `AREA_NUM`   VARCHAR(45)    NULL        COMMENT '지역 번호', 
    `AREA_NAME`  VARCHAR(45)    NULL        COMMENT '지역명', 
    PRIMARY KEY (AREA_NUM)
);

ALTER TABLE AREA COMMENT '지역';


-- AREA Table Create SQL
CREATE TABLE MEMBER
(
    `ID`         VARCHAR(45)    NOT NULL    COMMENT '아이디', 
    `AREA_NAME`  VARCHAR(45)    NULL        COMMENT '지역', 
    `TEL`        VARCHAR(45)    NULL        COMMENT '휴대폰번호', 
    `PASSWORD`   VARCHAR(45)    NULL        COMMENT '비밀번호', 
    `NAME`       VARCHAR(45)    NULL        COMMENT '이름', 
    PRIMARY KEY (ID)
);

ALTER TABLE MEMBER COMMENT '멤버';

ALTER TABLE MEMBER
    ADD CONSTRAINT FK_MEMBER_AREA_NAME_AREA_AREA_NAME FOREIGN KEY (AREA_NAME)
        REFERENCES AREA (AREA_NAME) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- AREA Table Create SQL
CREATE TABLE INTEREST_CATEGORY
(
    `NUM`   INT            NULL        COMMENT '분류 번호', 
    `NAME`  VARCHAR(45)    NULL        COMMENT '이름', 
    PRIMARY KEY (NUM)
);

ALTER TABLE INTEREST_CATEGORY COMMENT '흥미분야';


-- AREA Table Create SQL
CREATE TABLE CLUB
(
    `CLUB_NAME`  VARCHAR(45)    NULL        COMMENT '동아리명', 
    `INTRO`      VARCHAR(45)    NULL        COMMENT '동아리 소개', 
    `AREA_NAME`  VARCHAR(45)    NULL        COMMENT '활동 지역명', 
    `CONTENT`    VARCHAR(45)    NULL        COMMENT '활동내용', 
    `ID`         VARCHAR(45)    NULL        COMMENT '팀장 아이디', 
    `CLUB_NUM`   INT            NULL        COMMENT '동아리 번호', 
    `INTEREST`   VARCHAR(45)    NULL        COMMENT '활동 주제', 
    `RECOMMEND`  INT            NULL        COMMENT '추천 수', 
    PRIMARY KEY (CLUB_NUM)
);

ALTER TABLE CLUB COMMENT '동아리';

ALTER TABLE CLUB
    ADD CONSTRAINT FK_CLUB_INTEREST_INTEREST_CATEGORY_NAME FOREIGN KEY (INTEREST)
        REFERENCES INTEREST_CATEGORY (NAME) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE CLUB
    ADD CONSTRAINT FK_CLUB_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE CLUB
    ADD CONSTRAINT FK_CLUB_AREA_NAME_AREA_AREA_NUM FOREIGN KEY (AREA_NAME)
        REFERENCES AREA (AREA_NUM) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- AREA Table Create SQL
CREATE TABLE CATEGORY
(
    `NUM`   INT            NOT NULL    COMMENT '카테고리 번호', 
    `NAME`  VARCHAR(45)    NULL        COMMENT '카테고리 이름', 
    PRIMARY KEY (NAME)
);

ALTER TABLE CATEGORY COMMENT '게시글 카테고리';


-- AREA Table Create SQL
CREATE TABLE CLUB_MEMBER
(
    `CLUB_NUM`  INT            NOT NULL    COMMENT '동아리 번호', 
    `ID`        VARCHAR(45)    NULL        COMMENT '멤버 아이디'
);

ALTER TABLE CLUB_MEMBER
    ADD CONSTRAINT FK_CLUB_MEMBER_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE CLUB_MEMBER
    ADD CONSTRAINT FK_CLUB_MEMBER_CLUB_NUM_CLUB_CLUB_NUM FOREIGN KEY (CLUB_NUM)
        REFERENCES CLUB (CLUB_NUM) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- AREA Table Create SQL
CREATE TABLE MEMBER_INTEREST
(
    `ID`    VARCHAR(45)    NULL        COMMENT '아이디', 
    `NAME`  VARCHAR(45)    NULL        COMMENT '분류 이름'
);

ALTER TABLE MEMBER_INTEREST
    ADD CONSTRAINT FK_MEMBER_INTEREST_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE MEMBER_INTEREST
    ADD CONSTRAINT FK_MEMBER_INTEREST_NAME_INTEREST_CATEGORY_NAME FOREIGN KEY (NAME)
        REFERENCES INTEREST_CATEGORY (NAME) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- AREA Table Create SQL
CREATE TABLE BOARD
(
    `POSTNUM`   INT            NOT NULL    AUTO_INCREMENT COMMENT '글번호', 
    `CATEGORY`  VARCHAR(45)    NULL        COMMENT '카테고리', 
    `TIME`      TIMESTAMP      NULL        COMMENT '작성일자', 
    `TITLE`     VARCHAR(45)    NULL        COMMENT '제목', 
    `CONTENT`   VARCHAR(45)    NULL        COMMENT '내용', 
    `ID`        VARCHAR(45)    NULL        COMMENT '작성자', 
    PRIMARY KEY (POSTNUM)
);

ALTER TABLE BOARD COMMENT '게시판';

ALTER TABLE BOARD
    ADD CONSTRAINT FK_BOARD_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE BOARD
    ADD CONSTRAINT FK_BOARD_CATEGORY_CATEGORY_NAME FOREIGN KEY (CATEGORY)
        REFERENCES CATEGORY (NAME) ON DELETE RESTRICT ON UPDATE RESTRICT;


-- AREA Table Create SQL
CREATE TABLE FAQ
(
    `NUM`      INT            NOT NULL    AUTO_INCREMENT COMMENT '글번호', 
    `TITLE`    VARCHAR(45)    NULL        COMMENT '제목', 
    `CONTENT`  VARCHAR(45)    NULL        COMMENT '내용', 
    PRIMARY KEY (NUM)
);

ALTER TABLE FAQ COMMENT 'FAQ';


-- AREA Table Create SQL
CREATE TABLE QNA
(
    `NUM`      INT            NULL        AUTO_INCREMENT COMMENT '질문 번호', 
    `TIME`     TIMESTAMP      NULL        COMMENT '작성일자', 
    `TITLE`    VARCHAR(45)    NULL        COMMENT '제목', 
    `ID`       VARCHAR(45)    NULL        COMMENT '작성자', 
    `CONTENT`  VARCHAR(45)    NULL        COMMENT '내용', 
    `EMAIL`    VARCHAR(45)    NULL        COMMENT '이메일', 
    PRIMARY KEY (NUM)
);

ALTER TABLE QNA COMMENT 'QNA';

ALTER TABLE QNA
    ADD CONSTRAINT FK_QNA_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID) ON DELETE RESTRICT ON UPDATE RESTRICT;


